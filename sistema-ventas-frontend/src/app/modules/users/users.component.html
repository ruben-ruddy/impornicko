<!-- sistema-ventas-frontend/src/app/modules/users/users.component.html -->
<div class="container mx-auto px-4 py-2 bg-white">
  <h2 class="text-2xl font-bold mb-6 text-gray-800">Lista de Usuarios</h2> 
  
  <button (click)="openAddUserModal()" class="bg-green-500 text-white px-4 py-2 rounded mb-4">
    Agregar Usuario
  </button>

  <div class="overflow-x-auto">
    <table class="min-w-full bg-white rounded-lg overflow-hidden">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre Completo</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Rol</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Usuario</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Teléfono</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Acciones</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        @for (user of users.users; track $index) {
        <tr class="hover:bg-gray-100 transition-colors">
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900 cursor-pointer" 
              (click)="openEditUserModal(user)">{{ user.nombre_completo }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ user.role.nombre_rol }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ user.nombre_usuario }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ user.email }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ user.telefono || 'N/A' }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
            <div class="flex space-x-2">
              <button (click)="openEditUserModal(user)"
                class="bg-blue-500 text-white px-3 py-1 rounded text-sm hover:bg-blue-600 dark:bg-blue-600 dark:hover:bg-blue-700"
                title="Editar usuario">
                Editar
              </button>
              <button (click)="$event.stopPropagation(); confirmDelete(user)"
                class="bg-red-500 text-white px-3 py-1 rounded text-sm hover:bg-red-600 dark:bg-red-600 dark:hover:bg-red-700 ml-2"
                title="Eliminar usuario">
                Eliminar
              </button>
            </div>
          </td>
        </tr>
        }
        @empty {
        <tr>
          <td colspan="7" class="px-6 py-4 text-center text-sm text-gray-500">
            No hay usuarios registrados
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>

  <!-- Paginación -->
  @if (users.total > users.limit) {
  <div class="mt-4 flex justify-between items-center">
    <div class="text-sm text-gray-700">
      Mostrando {{ (users.page - 1) * users.limit + 1 }} a 
      {{ Math.min(users.page * users.limit, users.total) }} de 
      {{ users.total }} resultados
    </div>
    <div class="flex space-x-2">
      <button (click)="previousPage()" 
              [disabled]="users.page <= 1"
              class="px-3 py-1 rounded border disabled:opacity-50">
        Anterior
      </button>
      <span class="px-3 py-1">{{ users.page }}</span>
      <button (click)="nextPage()" 
              [disabled]="users.page * users.limit >= users.total"
              class="px-3 py-1 rounded border disabled:opacity-50">
        Siguiente
      </button>
    </div>
  </div>
  }
</div>