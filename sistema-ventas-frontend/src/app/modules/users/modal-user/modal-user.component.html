<!-- sistema-ventas-frontend/src/app/modules/users/modal-user/modal-user.component.html -->
<div class="p-4 bg-white rounded-lg">
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-gray-800">
      {{ initialData ? 'Editar Usuario' : 'Nuevo Usuario' }}
    </h2>
    <button (click)="close()" class="text-gray-500 hover:text-gray-700 transition-colors">
      <i class="pi pi-times text-xl"></i>
    </button>
  </div>
  
  <div>
    <dynamic-form
      [fields]="usersFormFields(catalogs)"
      [initialData]="initialData"
      [askfor]="onFormCreated"
      (onFormChange)="handleFormChange($event)">
    </dynamic-form>
  </div>
  
  <div class="flex justify-end gap-4 mt-6 pt-4 border-t border-gray-200">
    <button (click)="close()" 
            class="px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
      Cancelar
    </button>
    
    <button 
      (click)="save()"
      [disabled]="!formData?.valid || saving"
      [ngClass]="{
        'bg-blue-600 hover:bg-blue-700 text-white': formData?.valid && !saving,
        'bg-gray-300 cursor-not-allowed text-gray-500': !formData?.valid || saving
      }"
      class="px-4 py-2 rounded-lg transition-colors flex items-center gap-2">
      @if (saving) {
        <i class="pi pi-spin pi-spinner"></i>
        {{ initialData ? 'Actualizando...' : 'Creando...' }}
      } @else {
        {{ initialData ? 'Actualizar' : 'Crear Usuario' }}
      }
    </button>
  </div>
</div>