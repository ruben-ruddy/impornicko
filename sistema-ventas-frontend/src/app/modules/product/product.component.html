<!-- //sistema-ventas-frontend/src/app/modules/product/product.component.html -->
<div class="container mx-auto px-4 py-2 bg-white">
  <h2 class="text-2xl font-bold mb-6 text-gray-800">Lista de Productos</h2> 
  <button (click)="openAddProductModal()" class="bg-green-500 text-white px-4 py-2 rounded mb-4">
    Agregar Producto
  </button>
  
  <!-- Filtros -->
  <div class="mb-4 flex space-x-4">
    <div>
      <label class="block text-sm font-medium text-gray-700">Mostrar</label>
      <select [(ngModel)]="itemsPerPage" (change)="loadProducts()" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-black">
        <option value="10">10</option>
        <option value="25">25</option>
        <option value="50">50</option>
        <option value="100">100</option>
      </select>
    </div>
    
    <div>
      <label class="block text-sm font-medium text-gray-700">Estado</label>
      <select [(ngModel)]="activeFilter" (change)="loadProducts()" class="mt-1 block w-full py-2 px-3 border border-gray-300 bg-white rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm text-black">
        <option value="all">Todos</option>
        <option value="active">Activos</option>
        <option value="inactive">Inactivos</option>
      </select>
    </div>
  </div>
  
  <div class="overflow-x-auto">
    <table class="min-w-full bg-white rounded-lg overflow-hidden">
      <thead class="bg-gray-100">
        <tr>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Nombre</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Descripción</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Precio Compra</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Precio Venta</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Categoría</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Stock</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Stock Mínimo</th>
          <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Estado</th>
        </tr>
      </thead>
      <tbody class="divide-y divide-gray-200">
        @for (product of products?.products; track $index) {
        <tr class="hover:bg-gray-100 transition-colors" (click)="openEditProductModal(product)">
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900">{{ product.nombre_producto }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ product.descripcion ? (product.descripcion.length > 30 ? product.descripcion.slice(0, 30) + '...' : product.descripcion) : 'N/A' }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ product.precio_compra }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ product.precio_venta }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ product.category.nombre_categoria }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">
            <span [class]="product.stock_actual > 10 ? 'text-green-600' : 'text-red-600'">
              {{ product.stock_actual }}
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500">{{ product.stock_minimo }}</td>
          <td class="px-6 py-4 whitespace-nowrap text-sm">
            <span [class]="product.activo ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'" class="px-2 py-1 rounded-full text-xs">
              {{ product.activo ? 'Activo' : 'Inactivo' }}
            </span>
          </td>
        </tr>
        }
      </tbody>
    </table>
  </div>
  
  <!-- Paginación -->
  <div class="mt-4 flex items-center justify-between">
    <div class="text-sm text-gray-700">
      Mostrando {{ (currentPage - 1) * itemsPerPage + 1 }} a {{ Math.min(currentPage * itemsPerPage, products?.total || 0) }} de {{ products?.total || 0 }} productos
    </div>
    <div class="flex space-x-2">
      <button 
        (click)="changePage(currentPage - 1)" 
        [disabled]="currentPage === 1"
        class="px-3 py-1 rounded border border-gray-300 bg-white text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed">
        Anterior
      </button>
      
      <span class="px-3 py-1 border border-gray-300 bg-blue-500 text-white rounded">
        {{ currentPage }}
      </span>
      
      <button 
        (click)="changePage(currentPage + 1)" 
        [disabled]="currentPage * itemsPerPage >= (products?.total || 0)"
        class="px-3 py-1 rounded border border-gray-300 bg-white text-gray-700 disabled:opacity-50 disabled:cursor-not-allowed">
        Siguiente
      </button>
    </div>
  </div>
</div>